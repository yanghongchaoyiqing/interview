<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="连接"><meta property="og:title" content="连接" />
<meta property="og:description" content="连接 在数据库原理中，关系运算包含 选择、投影、连接 这三种运算。相应的在SQL语句中也有表现，其中Where子句作为选择运算，Select子句作为投影运算，From子句作为连接运算。
连接运算是从两个关系的笛卡尔积中选择属性间满足一定条件的元组，在连接中最常用的是等值连接和自然连接。
 等值连接：关系R、S,取两者笛卡尔积中属性值相等的元组，不要求属性相同。比如 R.A=S.B 自然连接（内连接）：是一种特殊的等值连接，它要求比较的属性列必须是相同的属性组，并且把结果中重复属性去掉。  -- 关系R -- &#43;----&#43;--------&#43; -- | A | B | C | -- &#43;----&#43;--------&#43; -- | a1 | b1 | 5 | -- | a1 | b2 | 6 | -- | a2 | b3 | 8 | -- | a2 | b4 | 12| -- &#43;----&#43;--------&#43;  -- 关系S -- &#43;----&#43;----&#43; -- | B | E | -- &#43;----&#43;----&#43; -- | b1 | 3 | -- | b2 | 7 | -- | b3 | 10 | -- | b3 | 2 | -- | b5 | 2| -- &#43;----&#43;----&#43; 自然连接 R &amp; S的结果为：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hadyang.github.io/interview/docs/basic/database/join/" />
<meta property="article:published_time" content="2019-08-21T11:00:41+08:00" />
<meta property="article:modified_time" content="2019-08-21T11:00:41+08:00" />
<title>连接 | Interview</title>
<link rel="icon" href="/interview/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/interview/book.min.68d45956421753cdf6bcfc865ede445c56afc5bcaaebfe02961f44fe77d8f45a.css" integrity="sha256-aNRZVkIXU832vPyGXt5EXFavxbyq6/4Clh9E/nfY9Fo=">


<script defer src="/interview/en.search.min.20e9a0fd2837302bf176773af2b5c6ff9fdbd4d86baeaf72d42e857a5793cf59.js" integrity="sha256-IOmg/Sg3MCvxdnc68rXG/5/b1Nhrrq9y1C6FeleTz1k="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://hadyang.github.io/interview/"><span>Interview</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    <ul>
<li><a href="/interview/docs/basic/">计算机基础</a>
<ul>
<li><a href="/interview/docs/basic/algo/">算法</a>
<ul>
<li><a href="/interview/docs/basic/algo/tree/">树</a></li>
<li><a href="/interview/docs/basic/algo/hash/">Hash</a></li>
<li><a href="/interview/docs/basic/algo/mst/">最小生成树算法</a></li>
<li><a href="/interview/docs/basic/algo/path/">最短路径算法</a></li>
<li><a href="/interview/docs/basic/algo/kmp/">KMP算法</a></li>
<li><a href="/interview/docs/basic/algo/search/">查找算法</a></li>
<li><a href="/interview/docs/basic/algo/sort/">排序算法</a></li>
<li><a href="/interview/docs/basic/algo/skip_list/">跳跃表</a></li>
</ul>
</li>
<li><a href="/interview/docs/basic/os/">操作系统</a>
<ul>
<li><a href="/interview/docs/basic/os/arch/">计算机体系结构</a></li>
<li><a href="/interview/docs/basic/os/concurrency/">并发</a></li>
<li><a href="/interview/docs/basic/os/memory/">内存管理</a></li>
<li><a href="/interview/docs/basic/os/disk/">磁盘与文件</a></li>
<li><a href="/interview/docs/basic/os/linux/">Linux系统</a></li>
<li><a href="/interview/docs/basic/os/interrupt/">中断</a></li>
<li><a href="/interview/docs/basic/os/device/">设备管理</a></li>
<li><a href="/interview/docs/basic/os/io/">I/O</a></li>
<li><a href="/interview/docs/basic/os/questions/">面试题</a></li>
</ul>
</li>
<li><a href="/interview/docs/basic/net/">计算机网络</a>
<ul>
<li><a href="/interview/docs/basic/net/protocol/">底层网络协议</a></li>
<li><a href="/interview/docs/basic/net/tcp/">TCP</a></li>
<li><a href="/interview/docs/basic/net/ip/">IP</a></li>
<li><a href="/interview/docs/basic/net/http/">HTTP</a></li>
<li><a href="/interview/docs/basic/net/https/">HTTPS</a></li>
</ul>
</li>
<li><a href="/interview/docs/basic/database/">数据库</a>
<ul>
<li><a href="/interview/docs/basic/database/transaction/">事务</a></li>
<li><a href="/interview/docs/basic/database/index/">索引</a></li>
<li><a href="/interview/docs/basic/database/sql/">SQL</a></li>
<li><a href="/interview/docs/basic/database/join/"class=active>连接</a></li>
<li><a href="/interview/docs/basic/database/mysql/">MySQL</a></li>
<li><a href="/interview/docs/basic/database/concurrent/">并发控制</a></li>
<li><a href="/interview/docs/basic/database/innodb/">Innodb</a></li>
<li><a href="/interview/docs/basic/database/redis/">Redis</a></li>
</ul>
</li>
<li><a href="/interview/docs/basic/cryptology/">密码学</a></li>
</ul>
</li>
<li><a href="/interview/docs/java/">Java</a>
<ul>
<li><a href="/interview/docs/java/oop/">OOP</a></li>
<li><a href="/interview/docs/java/serilaser/">序列化</a></li>
<li><a href="/interview/docs/java/operator/">运算符</a></li>
<li><a href="/interview/docs/java/exception/">异常</a></li>
<li><a href="/interview/docs/java/generics/">泛型</a></li>
<li><a href="/interview/docs/java/object/">Object</a></li>
<li><a href="/interview/docs/java/string-builder/">StringBuilder</a></li>
<li><a href="/interview/docs/java/proxy/">代理</a></li>
<li><a href="/interview/docs/java/annotation/">注解</a></li>
<li><a href="/interview/docs/java/questions/">面试题</a></li>
<li><a href="/interview/docs/java/">集合</a>
<ul>
<li><a href="/interview/docs/java/collection/HashMap/">HashMap</a></li>
<li><a href="/interview/docs/java/collection/Concurrenthashmap/">Concurrenthashmap</a></li>
<li><a href="/interview/docs/java/collection/BlockQueue/">BlockQueue</a></li>
</ul>
</li>
<li><a href="/interview/docs/java/concurrent/">并发</a>
<ul>
<li><a href="/interview/docs/java/concurrent/thread/">线程</a></li>
<li><a href="/interview/docs/java/concurrent/volatile/">Volatile</a></li>
<li><a href="/interview/docs/java/concurrent/synchronized/">Synchronized</a></li>
<li><a href="/interview/docs/java/concurrent/AQS/">AQS</a></li>
<li><a href="/interview/docs/java/concurrent/count-down-latch/">CountDownLatch</a></li>
<li><a href="/interview/docs/java/concurrent/threadlocal/">Threadlocal</a></li>
<li><a href="/interview/docs/java/concurrent/interrupt/">线程中断</a></li>
</ul>
</li>
<li><a href="/interview/docs/java/jvm/">Java 虚拟机</a>
<ul>
<li><a href="/interview/docs/java/jvm/jvm-class-load-init/">类加载</a></li>
<li><a href="/interview/docs/java/jvm/jvm-class-loader/">类加载器</a></li>
<li><a href="/interview/docs/java/jvm/dispatcher/">Java分派机制</a></li>
<li><a href="/interview/docs/java/jvm/jvm-architecture/">虚拟机架构</a></li>
<li><a href="/interview/docs/java/jvm/memory-model/">内存模型</a></li>
<li><a href="/interview/docs/java/jvm/string-constant-pool/">String 常量池</a></li>
</ul>
</li>
<li><a href="/interview/docs/java/gc/">GC</a>
<ul>
<li><a href="/interview/docs/java/gc/jvm-gc/">Java 虚拟机垃圾收集</a></li>
<li><a href="/interview/docs/java/gc/jvm-object-lifecycle/">Java 虚拟机对象生命周期</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/interview/docs/fromwork/">框架</a>
<ul>
<li><a href="/interview/docs/fromwork/netty/">Netty</a></li>
<li><a href="/interview/docs/fromwork/mybatis/">Mybatis</a>
<ul>
<li><a href="/interview/docs/fromwork/mybatis/question/">面试题</a></li>
<li><a href="/interview/docs/fromwork/mybatis/cache/">缓存</a></li>
<li><a href="/interview/docs/fromwork/mybatis/proxy/">代理</a></li>
</ul>
</li>
<li><a href="/interview/docs/fromwork/spring/">Spring</a>
<ul>
<li><a href="/interview/docs/fromwork/spring/ioc/">IOC</a></li>
<li><a href="/interview/docs/fromwork/spring/design-partten/">设计模式</a></li>
<li><a href="/interview/docs/fromwork/spring/aop/">AOP</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/interview/docs/architecture/">系统架构</a>
<ul>
<li><a href="/interview/docs/architecture/base/">基本概念</a></li>
<li><a href="/interview/docs/architecture/concurrent/">高并发</a>
<ul>
<li><a href="/interview/docs/architecture/concurrent/flow-control/">流量控制</a></li>
</ul>
</li>
<li><a href="/interview/docs/architecture/design/">系统设计</a>
<ul>
<li><a href="/interview/docs/architecture/design/tinyURL/">短链接系统</a></li>
</ul>
</li>
<li><a href="/interview/docs/architecture/distributed/">分布式</a>
<ul>
<li><a href="/interview/docs/architecture/distributed/session/">分布式 Session</a></li>
<li><a href="/interview/docs/architecture/distributed/cache/">分布式缓存</a></li>
<li><a href="/interview/docs/architecture/distributed/lock/">分布式锁</a></li>
<li><a href="/interview/docs/architecture/distributed/transaction/">分布式事务</a></li>
<li><a href="/interview/docs/architecture/distributed/mq/">消息队列</a></li>
<li><a href="/interview/docs/architecture/distributed/zk/">Zookeeper</a></li>
<li><a href="/interview/docs/architecture/distributed/kafka/">Kafka</a></li>
<li><a href="/interview/docs/architecture/distributed/rpc/">远程调用</a></li>
<li><a href="/interview/docs/architecture/distributed/dubbo/">Dubbo</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/interview/docs/offer/">剑指offer</a>
<ul>
<li><a href="/interview/docs/offer/search-a-2d-matrix/">搜索二维矩阵</a></li>
<li><a href="/interview/docs/offer/replay-space/">替换空格</a></li>
<li><a href="/interview/docs/offer/print-link-from-tail/">从尾到头打印链表</a></li>
<li><a href="/interview/docs/offer/reConstructBinaryTree/">重建二叉树</a></li>
<li><a href="/interview/docs/offer/two-stack-fifo/">用两个栈实现一个队列</a></li>
<li><a href="/interview/docs/offer/find-minimum-in-rotated-sorted-array/">旋转数组的最小数字</a></li>
<li><a href="/interview/docs/offer/fibonacci/">斐波纳切数列</a></li>
<li><a href="/interview/docs/offer/number-of-one/">二进制中1的个数</a></li>
<li><a href="/interview/docs/offer/power/">数值的整数次方</a></li>
<li><a href="/interview/docs/offer/printn/">打印最大的 n 位数</a></li>
<li><a href="/interview/docs/offer/O1DeleteNode/">在O(1)的时间复杂度下删除节点</a></li>
<li><a href="/interview/docs/offer/reOrderArray/">调整数组顺序使奇数位于偶数前面</a></li>
<li><a href="/interview/docs/offer/FindKthToTail/">链表中倒数第k个结点</a></li>
<li><a href="/interview/docs/offer/revert-link/">反转链表</a></li>
<li><a href="/interview/docs/offer/merge-sort-link/">合并两个排序的链表</a></li>
<li><a href="/interview/docs/offer/HasSubtree/">树的子结构</a></li>
<li><a href="/interview/docs/offer/mirror-tree/">二叉树的镜像</a></li>
<li><a href="/interview/docs/offer/PrintMatrix/">顺时针打印矩阵</a></li>
<li><a href="/interview/docs/offer/MinStack/">包含min函数的栈</a></li>
<li><a href="/interview/docs/offer/IsPopOrder/">栈的压入、弹出序列</a></li>
<li><a href="/interview/docs/offer/PrintFromTopToBottom/">从上往下打印二叉树</a></li>
<li><a href="/interview/docs/offer/VerifySquenceOfBST/">二叉搜索树的后序遍历序列</a></li>
<li><a href="/interview/docs/offer/FindPath/">二叉树中和为某一值的路径</a></li>
<li><a href="/interview/docs/offer/CloneLink/">复杂链表的复制</a></li>
<li><a href="/interview/docs/offer/BST-Link-Convert/">二叉搜索树与双向链表</a></li>
<li><a href="/interview/docs/offer/Permutation/">字符串的排列</a></li>
<li><a href="/interview/docs/offer/MoreThanHalfNum/">数组中出现次数超过一半的数字</a></li>
<li><a href="/interview/docs/offer/GetLeastNumbers/">最小的K个数</a></li>
<li><a href="/interview/docs/offer/FindGreatestSumOfSubArray/">连续子数组的最大和</a></li>
<li><a href="/interview/docs/offer/NumberOfOneBetweenOneAndN/">从1到n整数中1出现的次数</a></li>
<li><a href="/interview/docs/offer/PrintMinNumber/">把数组排成最小的数</a></li>
<li><a href="/interview/docs/offer/GetUglyNumber/">丑数</a></li>
<li><a href="/interview/docs/offer/FirstNotRepeatingChar/">第一个只出现一次的字符</a></li>
<li><a href="/interview/docs/offer/InversePairs/">数组中的逆序对</a></li>
<li><a href="/interview/docs/offer/FindFirstCommonNode/">两个链表的第一个公共结点</a></li>
<li><a href="/interview/docs/offer/GetNumberOfK/">数字在排序数组中出现的次数</a></li>
<li><a href="/interview/docs/offer/TreeDepth/">二叉树的深度</a></li>
<li><a href="/interview/docs/offer/FindNumsAppearOnce/">数组中只出现一次的数字</a></li>
<li><a href="/interview/docs/offer/FindNumbersWithSum/">和为S的两个数字</a></li>
<li><a href="/interview/docs/offer/FindContinuousSequence/">和为S的连续正数序列</a></li>
<li><a href="/interview/docs/offer/ReverseSentence/">翻转单词顺序列</a></li>
<li><a href="/interview/docs/offer/LeftRotateString/">左旋转字符串</a></li>
<li><a href="/interview/docs/offer/SumOfNDice/">n个骰子的点数</a></li>
<li><a href="/interview/docs/offer/isContinuous/">扑克牌顺子</a></li>
<li><a href="/interview/docs/offer/LastRemaining/">圆圈中最后剩下的数</a></li>
<li><a href="/interview/docs/offer/sum/">求1+2+3+&hellip;+n</a></li>
<li><a href="/interview/docs/offer/Add/">不用加减乘除做加法</a></li>
<li><a href="/interview/docs/offer/Singleton/">单例</a></li>
<li><a href="/interview/docs/offer/Duplicate/">数组中重复的数字</a></li>
<li><a href="/interview/docs/offer/GetNext/">二叉树的下一个结点</a></li>
<li><a href="/interview/docs/offer/hasPath/">矩阵中的路径</a></li>
<li><a href="/interview/docs/offer/MovingCount/">机器人的运动范围</a></li>
<li><a href="/interview/docs/offer/CutRope/">剪绳子</a></li>
<li><a href="/interview/docs/offer/PatternMatch/">正则表达式匹配</a></li>
<li><a href="/interview/docs/offer/IsNumeric/">表示数值的字符串</a></li>
<li><a href="/interview/docs/offer/EntryNodeOfLoop/">链表中环的入口</a></li>
<li><a href="/interview/docs/offer/IsSymmetrical/">对称二叉树</a></li>
<li><a href="/interview/docs/offer/SerializeTree/">序列化二叉树</a></li>
<li><a href="/interview/docs/offer/StreamMid/">数据流中的中位数</a></li>
<li><a href="/interview/docs/offer/NOfNumberSerialize/">数字序列中的某一位的数字</a></li>
<li><a href="/interview/docs/offer/TranslateNumToStr/">把数字翻译成字符串</a></li>
<li><a href="/interview/docs/offer/MaxGift/">礼物的最大价值</a></li>
<li><a href="/interview/docs/offer/LongestNoRepeatSubString/">最长不含重复字符的子字符串</a></li>
<li><a href="/interview/docs/offer/CountOfSortedArray/">在排序数组中查找数字</a></li>
<li><a href="/interview/docs/offer/BSTKthNode/">二叉搜索树的第K大节点</a></li>
<li><a href="/interview/docs/offer/MaxInWindows/">滑动窗口的最大值</a></li>
<li><a href="/interview/docs/offer/MaxProfit/">股票的最大利润</a></li>
</ul>
</li>
<li><a href="/interview/docs/leetcode/">LeetCode</a>
<ul>
<li><a href="/interview/docs/leetcode/lengthOfLongestSubstring/">* 无重复字符的最长子串</a></li>
<li><a href="/interview/docs/leetcode/longestCommonPrefix/">最长公共前缀</a></li>
<li><a href="/interview/docs/leetcode/checkInclusion/">字符串的排列</a></li>
<li><a href="/interview/docs/leetcode/StringMultiply/">字符串相乘</a></li>
<li><a href="/interview/docs/leetcode/reverseWords/">翻转字符串里的单词</a></li>
<li><a href="/interview/docs/leetcode/simplifyPath/">* 简化路径</a></li>
<li><a href="/interview/docs/leetcode/restoreIpAddresses/">* 复原IP地址</a></li>
<li><a href="/interview/docs/leetcode/threeSum/">* 三数之和</a></li>
<li><a href="/interview/docs/leetcode/maxAreaOfIsland/">* 岛屿的最大面积</a></li>
<li><a href="/interview/docs/leetcode/searchRote/">* 搜索旋转排序数组</a></li>
<li><a href="/interview/docs/leetcode/findLengthOfLCIS/">最长连续递增序列</a></li>
<li><a href="/interview/docs/leetcode/findKthLargest/">数组中的第K个最大元素</a></li>
<li><a href="/interview/docs/leetcode/longestConsecutive/">最长连续序列</a></li>
<li><a href="/interview/docs/leetcode/findCircleNum/">* 朋友圈</a></li>
<li><a href="/interview/docs/leetcode/mergeRagen/">合并区间</a></li>
<li><a href="/interview/docs/leetcode/trap/">* 接雨水</a></li>
<li><a href="/interview/docs/leetcode/mergeTwoLists/">合并两个有序链表</a></li>
<li><a href="/interview/docs/leetcode/reverseList/">* 反转链表</a></li>
<li><a href="/interview/docs/leetcode/addTwoNumbers/">* 两数相加</a></li>
<li><a href="/interview/docs/leetcode/sortList/">* 排序链表</a></li>
<li><a href="/interview/docs/leetcode/detectCycle/">环形链表 II</a></li>
<li><a href="/interview/docs/leetcode/getIntersectionNode/">相交链表</a></li>
<li><a href="/interview/docs/leetcode/mergeKLists/">* 合并K个排序链表</a></li>
<li><a href="/interview/docs/leetcode/lowestCommonAncestor/">二叉树的最近公共祖先</a></li>
<li><a href="/interview/docs/leetcode/zigzagLevelOrder/">二叉树的锯齿形层次遍历</a></li>
<li><a href="/interview/docs/leetcode/maxProfit/">* 买卖股票的最佳时机</a></li>
<li><a href="/interview/docs/leetcode/maxProfit2/">* 买卖股票的最佳时机 II</a></li>
<li><a href="/interview/docs/leetcode/maxSubArray/">最大子序和</a></li>
<li><a href="/interview/docs/leetcode/MinStack/">* 最小栈</a></li>
<li><a href="/interview/docs/leetcode/LRUCache/">* LRU缓存机制</a></li>
<li><a href="/interview/docs/leetcode/AllOne/">全 O(1) 的数据结构</a></li>
<li><a href="/interview/docs/leetcode/mySqrt/">* x 的平方根</a></li>
<li><a href="/interview/docs/leetcode/validUtf8/">* UTF-8 编码验证</a></li>
<li><a href="/interview/docs/leetcode/salary/">* 第二高的薪水</a></li>
</ul>
</li>
</ul>





</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/interview/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>
  <strong>连接</strong>
</header>

      
<article class="markdown"><h1 id="连接">连接</h1>
<p>在数据库原理中，关系运算包含 <strong>选择</strong>、<strong>投影</strong>、<strong>连接</strong> 这三种运算。相应的在SQL语句中也有表现，其中Where子句作为选择运算，Select子句作为投影运算，From子句作为连接运算。</p>
<p>连接运算是从两个关系的笛卡尔积中选择属性间满足一定条件的元组，在连接中最常用的是等值连接和自然连接。</p>
<ul>
<li><strong>等值连接</strong>：关系R、S,取两者笛卡尔积中属性值相等的元组，不要求属性相同。比如 <code>R.A=S.B</code></li>
<li><strong>自然连接（内连接）</strong>：是一种特殊的等值连接，<strong>它要求比较的属性列必须是相同的属性组，并且把结果中重复属性去掉</strong>。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 关系R
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | A | B   | C |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a1 | b1 | 5 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a1 | b2 | 6 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a2 | b3 | 8 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a2 | b4 | 12|
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+--------+
</span><span style="color:#75715e"></span>
<span style="color:#75715e">-- 关系S
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+----+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | B   | E |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+----+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | b1 | 3 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | b2 | 7 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | b3 | 10 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | b3 | 2 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | b5 | 2|
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+----+
</span></code></pre></div><p>自然连接 R &amp; S的结果为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- +----+----+-----+----+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | A | B   | C  | E  |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+----+-----+----+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a1 | b1  | 5 | 3  |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a1 | b2  | 6 | 7  |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a2 | b3  | 8 | 10 |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | a2 | b3 | 8 | 2  |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+----+-----+----+
</span></code></pre></div><p>两个关系在做自然连接时，选择两个关系在公共属性上值相等的元组构成新的关系。此时关系R中某些元组有可能在S中不存在公共属性上相等的元组，从而造成R中这些元组在操作时被舍弃，同样，S中某些元组也可能被舍弃。这些舍弃的元组被称为 <strong>悬浮元组</strong>。</p>
<p>如果把悬浮元组也保存在结果中，而在其他属性上置为NULL，那么这种连接就成为 <strong>外连接</strong>，如果只保留左边关系R中的悬浮元组就叫做 <strong>左外连接（左连接）</strong>，如果只保留右边关系S中的悬浮元组就叫做 <strong>右外连接（右连接）</strong>。</p>
<h2 id="join">Join</h2>
<p>Join 用于多表中字段之间的联系，语法如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">... <span style="color:#66d9ef">FROM</span> table1 <span style="color:#66d9ef">INNER</span><span style="color:#f92672">|</span><span style="color:#66d9ef">LEFT</span><span style="color:#f92672">|</span><span style="color:#66d9ef">RIGHT</span> <span style="color:#66d9ef">JOIN</span> table2 <span style="color:#66d9ef">ON</span> conditiona

<span style="color:#75715e">-- table1:左表；table2:右表。
</span></code></pre></div><p>JOIN 按照功能大致分为如下三类：</p>
<ul>
<li><strong>INNER JOIN（内连接，或等值连接）</strong>：取得两个表中存在连接匹配关系的记录。</li>
<li><strong>LEFT JOIN（左连接）</strong>：取得左表（table1）完全记录，即是右表（table2）并无对应匹配记录。</li>
<li><strong>RIGHT JOIN（右连接）</strong>：与 LEFT JOIN 相反，取得右表（table2）完全记录，即是左表（table1）并无匹配对应记录。</li>
</ul>
<p>在下面的示例中使用以下数据：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> A.id,A.name,B.name <span style="color:#66d9ef">from</span> A,B <span style="color:#66d9ef">where</span> A.id<span style="color:#f92672">=</span>B.id;
<span style="color:#75715e">-- +----+-----------+-------------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | id | name       | name             |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+-----------+-------------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  1 | Pirate       | Rutabaga      |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  2 | Monkey    | Pirate            |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  3 | Ninja         | Darth Vader |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  4 | Spaghetti  | Ninja             |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+-----------+-------------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- 4 rows in set (0.00 sec)
</span></code></pre></div><h3 id="inner-join">Inner Join</h3>
<p>内连接，也叫等值连接，inner join产生同时符合A和B的一组数据。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> A <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span> B <span style="color:#66d9ef">on</span> A.name <span style="color:#f92672">=</span> B.name;
<span style="color:#75715e">-- +----+--------+----+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | id | name   | id | name   |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+--------+----+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  1 | Pirate |  2 | Pirate |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  3 | Ninja  |  4 | Ninja  |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+--------+----+--------+
</span></code></pre></div><p><img src="images/join_1.png" alt=""></p>
<h3 id="left-join">Left Join</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> A <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> B <span style="color:#66d9ef">on</span> A.name <span style="color:#f92672">=</span> B.name;
<span style="color:#75715e">-- 或者：select * from A left outer join B on A.name = B.name;
</span><span style="color:#75715e"></span>
<span style="color:#75715e">-- +----+-----------+------+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | id | name      | id   | name   |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+-----------+------+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  1 | Pirate    |    2 | Pirate |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  2 | Monkey    | NULL | NULL   |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  3 | Ninja     |    4 | Ninja  |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  4 | Spaghetti | NULL | NULL   |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+-----------+------+--------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- 4 rows in set (0.00 sec)
</span></code></pre></div><p><img src="images/join_2.png" alt=""></p>
<p><code>left join</code>，（或<code>left outer join</code>:在Mysql中两者等价，推荐使用<code>left join</code>）左连接从左表(A)产生一套完整的记录，与匹配的记录(右表(B))。如果没有匹配，右侧将包含null。</p>
<p>如果想只从左表(A)中产生一套记录，但不包含右表(B)的记录，可以通过设置where语句来执行，如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> A <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> B <span style="color:#66d9ef">on</span> A.name<span style="color:#f92672">=</span>B.name <span style="color:#66d9ef">where</span> A.id <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">or</span> B.id <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span>;
<span style="color:#75715e">-- +----+-----------+------+------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | id | name      | id   | name |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+-----------+------+------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  2 | Monkey    | NULL | NULL |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |  4 | Spaghetti | NULL | NULL |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +----+-----------+------+------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- 2 rows in set (0.00 sec)
</span></code></pre></div><p><img src="images/join_3.png" alt=""></p>
<p>根据上面的例子可以求差集，如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> A <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> B <span style="color:#66d9ef">ON</span> A.name <span style="color:#f92672">=</span> B.name
<span style="color:#66d9ef">WHERE</span> B.id <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NULL</span>
<span style="color:#66d9ef">union</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> A <span style="color:#66d9ef">right</span> <span style="color:#66d9ef">JOIN</span> B <span style="color:#66d9ef">ON</span> A.name <span style="color:#f92672">=</span> B.name
<span style="color:#66d9ef">WHERE</span> A.id <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NULL</span>;

<span style="color:#75715e">-- +------+-----------+------+-------------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | id   | name      | id   | name        |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +------+-----------+------+-------------+
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |    2 | Monkey    | NULL | NULL        |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- |    4 | Spaghetti | NULL | NULL        |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | NULL | NULL      |    1 | Rutabaga    |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- | NULL | NULL      |    3 | Darth Vader |
</span><span style="color:#75715e"></span><span style="color:#75715e">-- +------+-----------+------+-------------+
</span></code></pre></div><blockquote>
<p>union ：用于合并多个 select 语句的结果集，并去掉重复的值。
union all ：作用和 union 类似，但不会去掉重复的值。</p>
</blockquote>
<p><img src="images/join_4.png" alt=""></p>
<h3 id="cross-join">Cross join</h3>
<p>交叉连接，得到的结果是两个表的乘积，即笛卡尔积。</p>
<p>实际上，在 MySQL 中（<strong>仅限于 MySQL</strong>） <code>CROSS JOIN</code> 与 <code>INNER JOIN</code> 的表现是一样的，在不指定 ON 条件得到的结果都是笛卡尔积，反之取得两个表完全匹配的结果。</p>
<p><code>INNER JOIN</code> 与 <code>CROSS JOIN</code> 可以省略 <code>INNER</code> 或 <code>CROSS</code> 关键字，因此下面的 SQL 效果是一样的：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">... <span style="color:#66d9ef">FROM</span> table1 <span style="color:#66d9ef">INNER</span> <span style="color:#66d9ef">JOIN</span> table2
... <span style="color:#66d9ef">FROM</span> table1 <span style="color:#66d9ef">CROSS</span> <span style="color:#66d9ef">JOIN</span> table2
... <span style="color:#66d9ef">FROM</span> table1 <span style="color:#66d9ef">JOIN</span> table2
</code></pre></div></article>

      <div class="book-footer justify-between">
  

  

  
  <div>
    <a class="flex align-center" href="https://github.com/hadyang/interview/edit/master/content/docs/basic/database/join/index.md" target="_blank">
      <img src="/interview/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>
  

</div>

      
    </div>

    
  

  <aside class="book-toc levels-3 fixed">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#join">Join</a>
      <ul>
        <li><a href="#inner-join">Inner Join</a></li>
        <li><a href="#left-join">Left Join</a></li>
        <li><a href="#cross-join">Cross join</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </aside>



  </main>

  
</body>

</html>
